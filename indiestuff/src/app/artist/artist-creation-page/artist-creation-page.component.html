<div class="add-album-container">
  <div class="album-or-single">
    <mat-button-toggle-group
      #group="matButtonToggleGroup"
      [(ngModel)]="albumOrSingle"
      name="musicType"
      aria-label="Music Type"
    >
      <mat-button-toggle 
        class="album-or-single-toggle"
        [disabled]="tracks && tracks.length === 1 && albumOrSingle === 'single'"
        value="album">album</mat-button-toggle>
      <mat-button-toggle 
        class="album-or-single-toggle"
        [disabled]="tracks && (tracks.length > 1 || (tracks.length === 1 && albumForEdit) ) && albumOrSingle === 'album'"
        value="single">single
      </mat-button-toggle>
    </mat-button-toggle-group>
  </div>
  <form
    class="form-container"
    novalidate
    (ngSubmit)="onFormSubmit(albumForm)"
    #albumForm="ngForm"
  >
    <div class="left-side">
      <!-- title input block -->
      <div
        class="album-creation"
        [ngStyle]="{
          'background-color': (albumForEdit && albumForEdit.colour) || '#f8e3ff'
        }"
        [style.background]="color"
      >
        <div>
          <div class="form-group">
            <label for="inputTitle" class="col-lg-2 control-label"
              >{{ group.value }} title</label
            >
            <div class="col-lg-7">
              <input
                type="text"
                placeholder="{{ group.value }} name something pretentious..."
                class="form-control input-custom"
                [ngModel]="albumForEdit ? albumForEdit.title : newAlbum.title"
                name="title"
                #title="ngModel"
                id="inputTitle"
                required
              />
            </div>
          </div>
        </div>
        <img
          *ngIf="albumForEdit"
          class="image-uploaded"
          id="file_id"
          src="{{ albumForEdit.album_image_filename }}"
        />
        <img *ngIf="!albumForEdit" class="image-uploaded" id="file_id" />

        <!-- album cover block -->
        <div>
          <div class="form-group">
            <label for="inputCover" class="col-lg-2 control-label"
              >add {{ group.value }} cover</label
            >

            <label for="file-input">
              <img
                style="padding-left: 70px"
                width="60px"
                height="60px"
                src="/assets/icons/web/outline_add_photo_alternate_black_48dp.png"
              />
            </label>
            <input
              type="file"
              id="file-input"
              (change)="imageUpload($event)"
              style="display: none"
            />
          </div>
        </div>
        <!-- colour choice block -->
        <div>
          <div class="form-group">
            <label for="inputColour" class="col-lg-2 control-label"
              >colour</label
            >
            <img
              style="padding-left: 198px"
              width="60px"
              height="60px"
              src="/assets/icons/web/outline_color_lens_black_36dp.png"
              [(colorPicker)]="color"
              [cpColorMode]="'color'"
              [cpPresetColors]="[
                'rgba(71, 82, 94, 0.85)',
                '#00008B',
                '#2889e9',
                '#431c53',
                '#e920e9',
                'rgb(178, 32, 101)',
                '#FF8C00',
                '#fff500',
                '#8b0000',
                'rgb(236,64,64)',
                '#228B22',
                '#20B2AA',
                '#808000'
              ]"
              (colorPickerClose)="updateColor($event)"
            />
          </div>
        </div>

        <!-- song block -->
        <div>
          <div class="form-group">
            <label for="inputTrack" class="col-lg-2 control-label"
              >add track</label
            >
            <img
              style="padding-left: 163px"
              width="60px"
              height="60px"
              src="/assets/icons/web/outline_cloud_upload_black_36dp.png"
              (click)="openTrackUploadForm()"
            />
          </div>
        </div>
      </div>
    </div>
    <div class="right-side">
      <div cdkDropList class="track-list" (cdkDropListDropped)="drop($event)">
        <div *ngFor="let track of tracks; index as i" class="track-box" cdkDrag>
          <div class="left-side-items">
            <a>{{ i + 1 }}</a>
            <mat-icon 
              *ngIf="
                indexOfSongPlaying !== i ||
                (isPaused && indexOfSongPlaying === i)
              "
              class="play-arrow" 
              (click)="playSong(i)"
            >play_arrow_outline</mat-icon>
            <mat-icon
              *ngIf="isPaused === false && indexOfSongPlaying === i"
              class="pause-button"
              (click)="pauseTrack()"
            >pause_outline</mat-icon>
            <a>{{ track.title }}</a>
          </div>
          <div class="right-side-items">
            <span>{{ track.durationInSec }}s</span>
            <img src="/assets/icons/web/outline_comment_black_18dp.png" />
          </div>
        </div>
      </div>

      <div style="float: right">
        <button
          type="submit"
          cdkFocusInitial
          [disabled]="!albumForm.form.valid"
        >
          <mat-icon>done_outline</mat-icon>
          <span style="padding-top: 30px">{{
            albumForEdit ? "submit edit" : "create"
          }}</span>
        </button>
      </div>
    </div>
  </form>
</div>
